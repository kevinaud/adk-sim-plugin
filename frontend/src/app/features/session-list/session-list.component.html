<!-- Session List Component Template -->
<!-- Implements FR-002 (Session List) and FR-003 (Session Metadata) -->

<div class="flex flex-col items-center p-6 min-h-screen bg-surface">
  <!-- Route Error Banner (shown when redirected from invalid session) -->
  @if (hasRouteError()) {
    <app-error-banner
      class="w-full max-w-3xl mb-4"
      data-testid="route-error-banner"
      [message]="routeError()!"
      (dismissed)="dismissRouteError()"
    />
  }

  <mat-card class="w-full max-w-3xl">
    <mat-card-header>
      <mat-card-title class="flex items-center gap-2">
        <mat-icon class="text-primary">list</mat-icon>
        Available Sessions
      </mat-card-title>
      <mat-card-subtitle> Browse and select a simulation session </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <!-- Loading State -->
      @if (isLoading()) {
        <app-loading-state message="Loading sessions..." />
      }

      <!-- Error State -->
      @if (hasError() && !isLoading()) {
        <app-error-state [message]="error()!" (retry)="loadSessions()" />
      }

      <!-- Empty State -->
      @if (showEmptyState()) {
        <app-empty-state
          message="No sessions available"
          hint="Sessions will appear here when created by an ADK agent."
        />
      }

      <!-- Session List -->
      @if (hasSessions() && !isLoading()) {
        <app-session-card-list
          [sessions]="sessions()"
          (sessionSelected)="navigateToSession($event)"
        />
      }
    </mat-card-content>

    <mat-card-actions class="flex justify-end px-4 py-2">
      <button mat-button (click)="loadSessions()" [disabled]="isLoading()">
        <mat-icon>refresh</mat-icon>
        Refresh
      </button>
    </mat-card-actions>
  </mat-card>
</div>
